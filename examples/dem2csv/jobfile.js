import hooks from './hooks-blocks.js'
const longitude = 139.7811111
const latitude = 35.55333333
const resolution = 30
const halfWidth = 18000
const blockResolution = 9000

export default {
  id: 'dem-' + resolution + '-' + halfWidth,
  longitude, latitude, resolution, halfWidth, blockResolution,
  options: {
    // If we use a download task per grid cell this should be high like 50,
    // much lower if we use a download task per grid block
    workersLimit: 4
  },
  store: 'job-store',
  taskTemplate: {
    store: 'job-store',
    id: '<%= jobId %>-<%= taskId %>.tif',
    type: 'wcs',
    options: {
      url: 'https://api.gift.staging.kalisio.xyz/wcs?jwt=' + process.env.JWT,
      version: '2.0.1',
      format: 'geotiff16',
      coverageId: 'dem',
      longitudeLabel: 'Long',
      latitudeLabel: 'Lat',
      auth: {
        user: process.env.USER_NAME,
        password: process.env.USER_PASSWORD
      }
    }
  },
  // This hook setup is to perform DEM data download of the grid by block
  // In this case a CSV is generated by block and all must be marged at the end
  // The job needs to include a blockSize parameter
  hooks
  // This hook setup is to perform DEM data download of each grid cell independently
  // The problem is that processing time might be too long on high resolution grids
  //hooks: require('./hooks')
}
